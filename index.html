<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LKCHAT - Fullscreen</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body,html{width:100%;height:100%;background:#000;color:#fff;overflow:hidden;}
.sidebar{width:60px;background:#1a1a1a;display:flex;flex-direction:column;padding:10px;gap:25px;
transition:transform 0.3s ease;transform:translateX(-60px);position:fixed;height:100%;z-index:10;}
.sidebar button,.sidebar a{background:#333;color:#fff;border:none;border-radius:10px;padding:12px;
cursor:pointer;text-align:center;font-size:1.2rem;display:flex;justify-content:center;align-items:center;transition:0.3s;}
.sidebar button:hover,.sidebar a:hover{background:#5555ff;transform:translateX(5px);}
.sidebar.open{transform:translateX(0);}
.chat-wrapper{flex:1;margin-left:0;width:100%;height:100%;transition:margin-left 0.3s ease;
display:flex;flex-direction:column;}
.chat-wrapper.shifted{margin-left:60px;}
.hamburger{position:fixed;top:15px;left:15px;z-index:15;width:30px;height:25px;
display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;}
.hamburger div{height:4px;background:#fff;border-radius:2px;transition:0.3s;}
.chat-container{display:flex;flex-direction:column;height:100vh;background:#121212;}
.chat-header{flex:0 0 auto;padding:15px 20px;background:#1f1f1f;font-size:1.5rem;font-weight:bold;
display:flex;align-items:center;gap:10px;position:sticky;top:0;z-index:5;}
.chat-header span{
  background:linear-gradient(270deg,#ff0055,#00ffcc,#ffcc00,#00aaff,#ff00ff);
  background-size:800% 800%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:rgbFlow 6s linear infinite,glow 2s ease-in-out infinite alternate;
  font-weight:900;letter-spacing:1px;
}
@keyframes rgbFlow{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
@keyframes glow{from{text-shadow:0 0 10px #00ffff,0 0 20px #00ffff;}to{text-shadow:0 0 20px #ff00ff,0 0 40px #ff00ff;}}
.input-container{flex:0 0 auto;display:flex;padding:10px;border-bottom:1px solid #333;background:#121212;
position:sticky;top:60px;z-index:5;}
.message-input{flex:1;border-radius:25px;padding:10px 15px;font-size:1rem;border:2px solid #333;
outline:none;background:#1a1a1a;color:#fff;}
.message-input:focus{border-color:#5555ff;}
.send-button{background:#3333ff;color:#fff;border-radius:25px;padding:10px 18px;margin-left:10px;
cursor:pointer;font-weight:600;}
.chat-messages{flex:1 1 auto;overflow-y:auto;padding:15px;display:flex;flex-direction:column;
gap:10px;background:#1a1a1a;scroll-behavior:smooth;}
.chat-messages::-webkit-scrollbar{width:6px;}
.chat-messages::-webkit-scrollbar-thumb{background:#333;border-radius:3px;}
.message{max-width:80%;padding:12px 18px;word-wrap:break-word;line-height:1.4;opacity:0;
transform:translateY(20px);animation:fadeInUp 0.5s forwards;border-radius:18px;}
.user-message{align-self:flex-end;background:#fff;color:#000;}
.bot-message{align-self:flex-start;background:#2c2c2c;color:#fff;}
@keyframes fadeInUp{to{opacity:1;transform:translateY(0);}}
.typing-indicator{display:flex;align-items:center;background:#2c2c2c;border-radius:18px;padding:10px 16px;
width:fit-content;animation:fadeInUp 0.5s forwards;}
.typing-dot{width:8px;height:8px;background:#999;border-radius:50%;margin:0 2px;animation:typing 1.4s infinite ease-in-out;}
.typing-dot:nth-child(2){animation-delay:0.2s;}
.typing-dot:nth-child(3){animation-delay:0.4s;}
@keyframes typing{0%,60%,100%{transform:translateY(0);}30%{transform:translateY(-5px);}}
.chat-footer{flex:0 0 auto;text-align:center;padding:8px;background:#1f1f1f;font-size:0.85rem;color:#aaa;
position:sticky;bottom:0;}
</style>
</head>
<body>

<div class="hamburger" id="hamburger"><div></div><div></div><div></div></div>

<div class="sidebar" id="sidebar">
  <button onclick="showChatHistory()" title="History"><i class="fa-solid fa-clock"></i></button>
  <button onclick="clearChat()" title="Clear"><i class="fa-solid fa-trash"></i></button>
  <a href="https://wa.me/0750700533" target="_blank" title="WhatsApp"><i class="fa-brands fa-whatsapp"></i></a>
</div>

<div class="chat-wrapper" id="chatWrapper">
  <div class="chat-container">
    <div class="chat-header">
      <button onclick="goBack()"><i class="fa-solid fa-arrow-left"></i></button>
      <span>üåê LK CHAT ü§ñ</span>
    </div>
    <div class="input-container">
      <input type="text" class="message-input" id="messageInput" placeholder="Type your message...">
      <button class="send-button" id="sendButton">Send</button>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-footer">Created By Bhanuka Bandaranayaka üá±üá∞</div>
    <input type="password" id="apiKey" value="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" style="display:none;">
  </div>
</div>

<script>
// Sidebar
const hamburger=document.getElementById('hamburger');
const sidebar=document.getElementById('sidebar');
const chatWrapper=document.getElementById('chatWrapper');
hamburger.onclick=()=>{sidebar.classList.toggle('open');chatWrapper.classList.toggle('shifted');};

// Chat
const chatMessages=document.getElementById('chatMessages');
const messageInput=document.getElementById('messageInput');
const sendButton=document.getElementById('sendButton');
const apiKey=document.getElementById('apiKey').value;

let chatHistory=JSON.parse(localStorage.getItem("chatHistory")||"[]");
chatHistory.forEach(msg=>addMessage(msg.text,msg.isUser,false));

sendButton.onclick=sendMessage;
messageInput.addEventListener('keypress',e=>{if(e.key==='Enter')sendMessage();});

function addMessage(text,isUser,save=true){
  if(!text)return;
  const emojiList=["üòä","üòé","ü§ñ","üí¨","‚ú®","üî•","üåü","üöÄ","üòÑ","‚ù§Ô∏è"];
  const randomEmoji=emojiList[Math.floor(Math.random()*emojiList.length)];
  const div=document.createElement('div');
  div.className='message '+(isUser?'user-message':'bot-message');
  div.textContent=text+" "+randomEmoji;
  chatMessages.append(div);
  chatMessages.scrollTop=chatMessages.scrollHeight;
  if(save){chatHistory.push({text,isUser});localStorage.setItem("chatHistory",JSON.stringify(chatHistory));}
}

function showTyping(){
  if(document.getElementById('typing'))return;
  const div=document.createElement('div');div.className='typing-indicator';div.id='typing';
  div.innerHTML='<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
  chatMessages.append(div);
  chatMessages.scrollTop=chatMessages.scrollHeight;
}
function hideTyping(){const t=document.getElementById('typing');if(t)t.remove();}

async function sendMessage(){
  const message=messageInput.value.trim();
  if(!message)return;
  addMessage(message,true);
  messageInput.value='';
  showTyping();
  sendButton.disabled=true;

  try{
    const response=await fetch("https://openrouter.ai/api/v1/chat/completions",{
      method:"POST",
      headers:{
        "Authorization":`Bearer ${apiKey}`,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        model:"openai/gpt-4o-mini",
        messages:[{role:"user",content:message}]
      })
    });
    const data=await response.json();
    hideTyping();
    if(data.choices && data.choices[0])
      addMessage(data.choices[0].message.content,false);
    else
      addMessage("‚ö†Ô∏è Error: Couldn't get a valid response.",false);
  }catch(err){
    hideTyping();
    addMessage("‚ùå Network or API error.",false);
    console.error(err);
  }finally{sendButton.disabled=false;}
}

// Helpers
function clearChat(){chatMessages.innerHTML='';chatHistory=[];localStorage.removeItem("chatHistory"); addMessage("üßπ Chat Cleared!",false);}
function showChatHistory(){alert(chatHistory.map(m=>(m.isUser?'You: ':'Bot: ')+m.text).join("\n"));}
function goBack(){window.location.href="https://sites.google.com/view/lkchat/home?authuser=0";}
</script>
</body>
</html>   ( ‡∂∏‡∂ß ‡∂∏‡∑ö‡∂ö ‡∑É‡∂ª‡∑ä‡∂†‡∑ä ‡∂ë‡∂±‡∑ä‡∂ú‡∑í‡∂±‡∑ä ‡∂ë‡∂ö‡∂ö‡∑ä ‡∑Ä‡∑í‡∂Ø‡∑í‡∂∫‡∂ß ‡∑Ñ‡∂Ø‡∂Ω ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±)
